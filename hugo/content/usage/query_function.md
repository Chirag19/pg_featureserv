---
title: "Querying Functions"
date:
draft: false
weight: 250
---

Functions can be queried to provide sets of features or data.

## Query Function Features or Data

The path `/functions/{funid}/items` is the basic query to return
a set of features or data from a function.

The response from a spatial function is a GeoJSON feature collection containing the result.
The response from a non-spatial function is a JSON dataset containing the result.

These are analagous to using SQL statement clauses to control the results of a query.
In fact, the service implements these parameters by generating the equivalent SQL.
Note however that these filters are applied to the results
of an executed function, so do not necessarily allow optimizing the
execution of the function (e.g. specifying a bounding box only filters
the results generated by the function; it is not available to the
function to reduce the number of records generated.)

### Function arguments

`param=value`

Omitted arguments will use the default specified in the function definition (if any).

### Filter by Bounding Box

The query parameter `bbox=MINX,MINY,MAXX,MAXY`
is used to limit the features returned to those that intersect
a specified bounding box.
The bounding box is specified in geographic coordinates
(longitude/latitude, SRID = 4326).
If the source data has a non-geographic coordinate system
the bounding box is transformed to the source coordinate system
to perform the query.
This is only useful for spatial functions.

#### Example
```
http://localhost:9000/functions/countries_name/items?bbox=10.4,43.3,26.4,47.7
```

### Restrict Properties

The query parameter `properties=PROP1,PROP2,PROP3...`
can be used to restrict the properties which are returned in the response.
This allows reducing the response size of functions
which produce a large number of records.

#### Example
```
http://localhost:9000/functions/countries_name/items?properties=name
```

### Limiting and Paging

The query parameter `limit=N` can be added to the query to control
the maximum number of data items returned in a response.

The query parameter `offset=N` specifies the offset in the
actual query result at which the response data set starts.

Used together these two parameters allow paging through large result
sets.

#### Example
```
http://localhost:9000/functions/countries_name/items?limit=50&offset=200
```

The default page size and the maximum page size
are set by the configuration parameters `LimitDefault` and `LimitMax`.

### Ordering

The result set can be ordered by any property it contains.
This allows performing "greatest N" or "smallest N" queries.

* `orderBy=PROP` orders results by `PROP` in ascending order

The sort order can be specified by appending `:A` (ascending)
or `:D` (descending) to the ordering property name.
The default is ascending order.

* `orderBy=PROP:A` orders results by `PROP` in ascending order
* `orderBy=PROP:D` orders results by `PROP` in descending order

#### Example
```
http://localhost:9000/functions/countries_name/items?orderBy=name
```
